(function(){angular.module("treeGrid",[]).directive("treeGrid",["$timeout",function(n){return{restrict:"E",template:'<div class="table-responsive">              <table class="table tree-grid table-condensed table-striped table-small">                  <thead>                  <tr>                      <th colspan="{{colDefinitions.length + 1}}">Portfolio Summary (* Calculated value for indicitive purposes.)<\/th>                  <\/tr>                  <tr>                      <th>{{expandingProperty.displayName || expandingProperty.field || expandingProperty}}<\/th>                      <th ng-repeat="col in colDefinitions">{{col.displayName || col.field}}<\/th>                  <\/tr>                  <\/thead>                  <tbody>                  <tr ng-repeat="row in tree_rows | filter:{visible:true} track by row.branch.uid"                      ng-class="\'level-\' + {{ row.level }} + (row.branch.selected ? \' active\':\'\')" class="tree-grid-row">                      <td style="width: 35px"><a ng-click="user_clicks_branch(row.branch)"><i ng-class="row.tree_icon"                                 ng-click="row.branch.expanded = !row.branch.expanded"                                 class="indented tree-icon"><\/i>                          <\/a><span class="indented tree-label" ng-click="user_clicks_branch(row.branch)">                            {{row.branch[expandingProperty.field] || row.branch[expandingProperty]}}<\/span>                      <\/td>                      <td ng-repeat="col in colDefinitions">{{row.branch[col.field]}}<\/td>                  <\/tr>                  <\/tbody>              <\/table>          <\/div>',replace:!0,scope:{treeData:"=",colDefs:"=",expandOn:"=",onSelect:"&",initialSelection:"@",treeControl:"="},link:function(t,i,r){var nt,s,w,b,v,e,y,o,k,l,f,u,a,h,c,d,p;if(nt=function(n){return console.log("ERROR:"+n),void 0},r.iconExpand=r.iconExpand?r.iconExpand:"icon-plus  glyphicon glyphicon-plus  fa fa-plus",r.iconCollapse=r.iconCollapse?r.iconCollapse:"icon-minus glyphicon glyphicon-minus fa fa-minus",r.iconLeaf=r.iconLeaf?r.iconLeaf:"icon-file  glyphicon glyphicon-file  fa fa-file",r.expandLevel=r.expandLevel?r.expandLevel:"3",b=parseInt(r.expandLevel,10),!t.treeData){alert("No data was defined for the tree, please define treeData!");return}if(r.expandOn)s=t.expandOn,t.expandingProperty=t.expandOn;else if(t.treeData.length){for(a=t.treeData[0],h=Object.keys(a),c=0,d=h.length;c<d;c++)if(typeof a[h[c]]=="string"){s=h[c];break}s||(s=h[0]);t.expandingProperty=s}if(r.colDefs)t.colDefinitions=t.colDefs;else if(t.treeData.length){var g=[],a=t.treeData[0],tt=["children","level","expanded",s];for(p in a)tt.indexOf(p)===-1&&g.push({field:p});t.colDefinitions=g}return e=function(n){var r,e,i,o,u,f;for(r=function(t,i){var o,u,s,f,e;if(n(t,i),t.children!=null){for(f=t.children,e=[],u=0,s=f.length;u<s;u++)o=f[u],e.push(r(o,i+1));return e}},u=t.treeData,f=[],i=0,o=u.length;i<o;i++)e=u[i],f.push(r(e,1));return f},f=null,l=function(i){if(!i){f!=null&&(f.selected=!1);f=null;return}if(i!==f){if(f!=null&&(f.selected=!1),i.selected=!0,f=i,w(i),i.onSelect!=null)return n(function(){return i.onSelect(i)});if(t.onSelect!=null)return n(function(){return t.onSelect({branch:i})})}},t.user_clicks_branch=function(n){if(n!==f)return l(n)},y=function(n){var t;return t=void 0,n.parent_uid&&e(function(i){if(i.uid===n.parent_uid)return t=i}),t},v=function(n,t){var i;return i=y(n),i!=null?(t(i),v(i,t)):void 0},w=function(n){return v(n,function(n){return n.expanded=!0})},t.tree_rows=[],k=function(){var i,o,n,h,u,f;for(e(function(n){if(!n.uid)return n.uid=""+Math.random()}),e(function(n){var u,t,f,i,r;if(angular.isArray(n.children)){for(i=n.children,r=[],t=0,f=i.length;t<f;t++)u=i[t],r.push(u.parent_uid=n.uid);return r}}),t.tree_rows=[],e(function(n){var t,i;if(n.children){if(n.children.length>0)return i=function(n){return typeof n=="string"?{label:n,children:[]}:n},n.children=function(){var r,e,u,f;for(u=n.children,f=[],r=0,e=u.length;r<e;r++)t=u[r],f.push(i(t));return f}()}else return n.children=[]}),i=function(n,u,f){var c,l,a,e,v,o,h;if(u.expanded==null&&(u.expanded=!1),a=u.children&&u.children.length!==0?u.expanded?r.iconCollapse:r.iconExpand:r.iconLeaf,u.level=n,t.tree_rows.push({level:n,branch:u,label:u[s],tree_icon:a,visible:f}),u.children!=null){for(o=u.children,h=[],e=0,v=o.length;e<v;e++)c=o[e],l=f&&u.expanded,h.push(i(n+1,c,l));return h}},u=t.treeData,f=[],n=0,h=u.length;n<h;n++)o=u[n],f.push(i(1,o,!0));return f},t.$watch("treeData",k,!0),r.initialSelection!=null&&e(function(t){if(t.label===r.initialSelection)return n(function(){return l(t)})}),o=t.treeData.length,e(function(n,t){return n.level=t,n.expanded=n.level<b}),t.treeControl!=null&&angular.isObject(t.treeControl)?(u=t.treeControl,u.expand_all=function(){return e(function(n){return n.expanded=!0})},u.collapse_all=function(){return e(function(n){return n.expanded=!1})},u.get_first_branch=function(){return o=t.treeData.length,o>0?t.treeData[0]:void 0},u.select_first_branch=function(){var n;return n=u.get_first_branch(),u.select_branch(n)},u.get_selected_branch=function(){return f},u.get_parent_branch=function(n){return y(n)},u.select_branch=function(n){return l(n),n},u.get_children=function(n){return n.children},u.select_parent_branch=function(n){var t;return n==null&&(n=u.get_selected_branch()),n!=null&&(t=u.get_parent_branch(n),t!=null)?(u.select_branch(t),t):void 0},u.add_branch=function(n,i){return n!=null?(n.children.push(i),n.expanded=!0):t.treeData.push(i),i},u.add_root_branch=function(n){return u.add_branch(null,n),n},u.expand_branch=function(n){return n==null&&(n=u.get_selected_branch()),n!=null?(n.expanded=!0,n):void 0},u.collapse_branch=function(n){return n==null&&(n=f),n!=null?(n.expanded=!1,n):void 0},u.get_siblings=function(n){var i;return n==null&&(n=f),n!=null?(i=u.get_parent_branch(n),i?i.children:t.treeData):void 0},u.get_next_sibling=function(n){var i,t;return n==null&&(n=f),n!=null&&(t=u.get_siblings(n),o=t.length,i=t.indexOf(n),i<o)?t[i+1]:void 0},u.get_prev_sibling=function(n){var i,t;return n==null&&(n=f),t=u.get_siblings(n),o=t.length,i=t.indexOf(n),i>0?t[i-1]:void 0},u.select_next_sibling=function(n){var t;return n==null&&(n=f),n!=null&&(t=u.get_next_sibling(n),t!=null)?u.select_branch(t):void 0},u.select_prev_sibling=function(n){var t;return n==null&&(n=f),n!=null&&(t=u.get_prev_sibling(n),t!=null)?u.select_branch(t):void 0},u.get_first_child=function(n){var t;return n==null&&(n=f),n!=null&&((t=n.children)!=null?t.length:void 0)>0?n.children[0]:void 0},u.get_closest_ancestor_next_sibling=function(n){var t,i;return t=u.get_next_sibling(n),t!=null?t:(i=u.get_parent_branch(n),u.get_closest_ancestor_next_sibling(i))},u.get_next_branch=function(n){var t;return n==null&&(n=f),n!=null?(t=u.get_first_child(n),t!=null?t:u.get_closest_ancestor_next_sibling(n)):void 0},u.select_next_branch=function(n){var t;return n==null&&(n=f),n!=null&&(t=u.get_next_branch(n),t!=null)?(u.select_branch(t),t):void 0},u.last_descendant=function(n){var t;return n==null,o=n.children.length,o===0?n:(t=n.children[o-1],u.last_descendant(t))},u.get_prev_branch=function(n){var t;return n==null&&(n=f),n!=null?(t=u.get_prev_sibling(n),t!=null?u.last_descendant(t):u.get_parent_branch(n)):void 0},u.select_prev_branch=function(n){var t;return n==null&&(n=f),n!=null&&(t=u.get_prev_branch(n),t!=null)?(u.select_branch(t),t):void 0}):void 0}}}])}).call(this);
/*
//# sourceMappingURL=tree-grid-directive.min.js.map
*/